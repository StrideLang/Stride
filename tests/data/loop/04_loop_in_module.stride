use DesktopAudio version 1.0

module LoopModule {
	ports: [
		mainOutputPort OutputPort { block: Output }
	]
	blocks:  [
		signal List[20] {
			default: 1
			type: _RealType
		}

		loop Loop {
			ports: [
				mainInputPort InputPort {
					block: Input
				}
				mainOutputPort OutputPort {
					block: Output
				}
			]
			blocks: [
				signal Input[InputPort.size] {
					type: _RealType
				}
				signal Output { default: 0 reset: Reset }
				signal Index { default: 0 reset: Reset }
				switch Done {}
				trigger Reset {}
			]
			onExecution: Reset
			terminateWhen: Done
			streams: [
				Input [ Index ] + Output >> Output ;
				Index + 1 >> Index ;
				[ Index , InputPort.size ] >> Equal () >> Done ;
			]
		}
	]
	streams: [
		List >> Loop() >> Output;
	]
}

LoopModule() >> AudioOut[0];

